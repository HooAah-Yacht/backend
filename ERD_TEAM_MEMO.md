ERD 한장 요약 메모

목적

- 팀 전체(개발자/디자이너/PM)가 1분 안에 ERD의 핵심 구조와 결정 이유를 이해하도록 간단히 정리합니다.

파일 위치

- c:\Users\user\Documents\요트앱2\backend\ERD_TEAM_MEMO.md

핵심 요약

- 테이블명(한글): `사용자`, `요트`, `요트_사용자`, `부품`, `정비사`, `정비_내역`, `켈린더`, `알림`, `예약`
- 목적: 예약/정비/부품/알림 흐름을 지원하도록 ERD를 확장했습니다.
- 주요 변경: PK(AUTO_INCREMENT) 추가, FK(외래키)로 무결성 보장, 인덱스 추가로 조회 성능 보강.

항목별 한줄 설명

- 사용자: 이메일(유니크), 연락처, 역할
- 요트: 이름/설명/위치/가격/소유자, 예약과 연동
- 요트\_사용자: 유저-요트 M:N 매핑
- 부품: 요트에 속한 부품, 재고/단가/마지막교체일 저장
- 정비사: 정비 담당자(선택적)
- 정비\_내역: 누가/어떤 요트/어떤 부품을 언제 정비했는지, 비용과 상태 포함
- 켈린더: 정비/예약 등 일정 표시(요트 또는 부품 단위)
- 알림: 예약 리마인더, 부품 교체 알림 등
- 예약: 유저가 만든 요트 예약(시간범위, 상태, 총요금)

왜 이렇게 만들었나(간단히)

- 예약 기능이 핵심이므로 `예약` 테이블 추가: 예약 충돌 검증·상태 관리가 필요
- 부품 재고 및 단가를 추가해 정비 비용 통계와 자동 알림(교체 예정) 구현 가능
- FK의 ON DELETE 정책은 데이터 보존/정리 기준에 맞춰 일부는 CASCADE(연관 데이터 정리), 일부는 SET NULL(작성자 삭제 시 기록 보존)로 분리

코드 반영 시 주의

- 테이블명이 한글이므로 Java 엔티티에 @Table(name = "한글명") 명시 필요
- 컬럼명이 snake_case로 되어 있으므로 @Column(name = "...")로 매핑 권장
- 예: @Entity @Table(name = "정비\_내역") class Repair { @Column(name = "repair_date") private LocalDate repairDate; }

ERDCloud 가져오기 (간단 절차)

1. ERDCloud 열기 → 가져오기 → SQL(MySQL) 선택
2. 프로젝트에 제공된 DDL 전체 붙여넣기
3. 엔티티 클릭해 PK/FK/인덱스 반영 확인
4. 각 엔티티에 이 메모 내용을 노트로 붙여두면 팀이 바로 확인 가능

다음 권장 액션

1. Untitled6 역할(예약으로 확정) 최종 승인
2. FK ON DELETE 정책(기록 보존 vs 자동정리) 팀 합의
3. Flyway 마이그레이션 파일 생성 및 스테이징에서 실행 후 QA

문의/담당

- ERD 변경/DDL 관련 질문은 이 메모에 댓글 또는 PR 코멘트로 남겨주세요.

작성자: ERD 정리 스크립트
작성일: 2025-11-11
